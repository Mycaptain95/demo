<!DOCTYPE html>
<html lang="en">
<!-- å‚è€ƒ
 * https://juejin.cn/post/6844904066301050893 -->

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- //Android ç¦æ­¢å±å¹•æ—‹è½¬ -->
    <meta name="screen-orientation" content="portrait">
    <!-- //å…¨å±æ˜¾ç¤º -->
    <meta name="full-screen" content="yes">
    <!-- //UCåº”ç”¨æ¨¡å¼ï¼Œä½¿ç”¨äº†applicationè¿™ç§åº”ç”¨æ¨¡å¼åï¼Œé¡µé¢è®²é»˜è®¤å…¨å±ï¼Œç¦æ­¢é•¿æŒ‰èœå•ï¼Œç¦æ­¢æ”¶æ‹¾ï¼Œæ ‡å‡†æ’ç‰ˆï¼Œä»¥åŠå¼ºåˆ¶å›¾ç‰‡æ˜¾ç¤ºã€‚ -->
    <meta name="browsermode" content="application">
    <!-- //QQå¼ºåˆ¶ç«–å± -->
    <meta name="x5-orientation" content="portrait">
    <!-- //QQå¼ºåˆ¶å…¨å± -->
    <meta name="x5-fullscreen" content="true">
    <!-- å…³é—­ç”µè¯å·ç è¯†åˆ« -->
    <meta name="format-detection" content="telephone=no" />
    <!-- å…³é—­é‚®ç®±è¯†åˆ«ï¼ˆAndroidï¼‰ -->
    <meta name="format-detection" content="email=no" />
    <title>Document</title>
</head>

<body>
    <div id="app">
        <!-- æ‰‹åŠ¨å¼€å¯ç”µè¯å·ç è¯†åˆ« -->
        <a href="tel:123456">123456</a>
        <!-- å¼€å¯é•¿æŒ‰é‚®ç®±åœ°å€å¼¹å‡ºé‚®ä»¶å‘é€çš„åŠŸèƒ½ -->
        <a mailto:dooyoe@gmail.com>dooyoe@gmail.com</a>

    </div>
</body>

<script>
    // ç§»åŠ¨ç«¯clickå±å¹•äº§ç”Ÿ200-300 msçš„å»¶è¿Ÿå“åº”
    // fastclickå¯ä»¥è§£å†³åœ¨æ‰‹æœºä¸Šç‚¹å‡»äº‹ä»¶çš„300mså»¶è¿Ÿ
    // zeptoçš„touchæ¨¡å—ï¼Œtapäº‹ä»¶ä¹Ÿæ˜¯ä¸ºäº†è§£å†³åœ¨clickçš„å»¶è¿Ÿé—®é¢˜

    // audio å’Œ video åœ¨ ios å’Œ andriod ä¸­è‡ªåŠ¨æ’­æ”¾
    // è¿™ä¸ªä¸æ˜¯bugï¼Œç”±äºè‡ªåŠ¨æ’­æ”¾ç½‘é¡µä¸­çš„éŸ³é¢‘æˆ–è§†é¢‘ï¼Œä¼šç»™ç”¨æˆ·å¸¦æ¥ä¸€äº›å›°æ‰°æˆ–è€…ä¸å¿…è¦çš„æµé‡æ¶ˆè€—ï¼Œæ‰€ä»¥è‹¹æœç³»ç»Ÿå’Œå®‰å“ç³»ç»Ÿé€šå¸¸éƒ½ä¼šç¦æ­¢è‡ªåŠ¨æ’­æ”¾å’Œä½¿ç”¨ JS çš„è§¦å‘æ’­æ”¾ï¼Œå¿…é¡»ç”±ç”¨æˆ·æ¥è§¦å‘æ‰å¯ä»¥æ’­æ”¾ã€‚åŠ å…¥è‡ªåŠ¨è§¦å‘æ’­æ”¾çš„ä»£ç 
    $('html').one('touchstart', function () {
        audio.play()
    })

    // iOS ä¸Šæ‹‰è¾¹ç•Œä¸‹æ‹‰å‡ºç°ç©ºç™½
    // æ‰‹æŒ‡æŒ‰ä½å±å¹•ä¸‹æ‹‰ï¼Œå±å¹•é¡¶éƒ¨ä¼šå¤šå‡ºä¸€å—ç™½è‰²åŒºåŸŸã€‚æ‰‹æŒ‡æŒ‰ä½å±å¹•ä¸Šæ‹‰ï¼Œåº•éƒ¨å¤šå‡ºä¸€å—ç™½è‰²åŒºåŸŸã€‚
    // åœ¨ iOS ä¸­ï¼Œæ‰‹æŒ‡æŒ‰ä½å±å¹•ä¸Šä¸‹æ‹–åŠ¨ï¼Œä¼šè§¦å‘ touchmove äº‹ä»¶ã€‚è¿™ä¸ªäº‹ä»¶è§¦å‘çš„å¯¹è±¡æ˜¯æ•´ä¸ª webview å®¹å™¨ï¼Œå®¹å™¨è‡ªç„¶ä¼šè¢«æ‹–åŠ¨ï¼Œå‰©ä¸‹çš„éƒ¨åˆ†ä¼šæˆç©ºç™½ã€‚
    document.body.addEventListener(
        'touchmove',
        function (e) {
            if (e._isScroller) return
            // é˜»æ­¢é»˜è®¤äº‹ä»¶
            e.preventDefault()
        },
        {
            passive: false
        }
    )

    // ios æ—¥æœŸè½¬æ¢ NAN çš„é—®é¢˜
    // å°†æ—¥æœŸå­—ç¬¦ä¸²çš„æ ¼å¼ç¬¦å·æ›¿æ¢æˆ'/'
    'yyyy-MM-dd'.replace(/-/g, '/')


    // è½¯é”®ç›˜é—®é¢˜ ğŸ‘‡

    // IOS é”®ç›˜å¼¹èµ·æŒ¡ä½åŸæ¥çš„è§†å›¾
    // å¯ä»¥é€šè¿‡ç›‘å¬ç§»åŠ¨ç«¯è½¯é”®ç›˜å¼¹èµ·Element.scrollIntoViewIfNeededï¼ˆBooleanï¼‰æ–¹æ³•ç”¨æ¥å°†ä¸åœ¨æµè§ˆå™¨çª—å£çš„å¯è§åŒºåŸŸå†…çš„å…ƒç´ æ»šåŠ¨åˆ°æµè§ˆå™¨çª—å£çš„å¯è§åŒºåŸŸã€‚ å¦‚æœè¯¥å…ƒç´ å·²ç»åœ¨æµè§ˆå™¨çª—å£çš„å¯è§åŒºåŸŸå†…ï¼Œåˆ™ä¸ä¼šå‘ç”Ÿæ»šåŠ¨ã€‚
    // trueï¼Œåˆ™å…ƒç´ å°†åœ¨å…¶æ‰€åœ¨æ»šåŠ¨åŒºçš„å¯è§†åŒºåŸŸä¸­å±…ä¸­å¯¹é½ã€‚
    // falseï¼Œåˆ™å…ƒç´ å°†ä¸å…¶æ‰€åœ¨æ»šåŠ¨åŒºçš„å¯è§†åŒºåŸŸæœ€è¿‘çš„è¾¹ç¼˜å¯¹é½ã€‚ æ ¹æ®å¯è§åŒºåŸŸæœ€é è¿‘å…ƒç´ çš„å“ªä¸ªè¾¹ç¼˜ï¼Œå…ƒç´ çš„é¡¶éƒ¨å°†ä¸å¯è§åŒºåŸŸçš„é¡¶éƒ¨è¾¹ç¼˜å¯¹å‡†ï¼Œæˆ–è€…å…ƒç´ çš„åº•éƒ¨è¾¹ç¼˜å°†ä¸å¯è§åŒºåŸŸçš„åº•éƒ¨è¾¹ç¼˜å¯¹å‡†
    window.addEventListener('resize', function () {
        if (
            document.activeElement.tagName === 'INPUT' ||
            document.activeElement.tagName === 'TEXTAREA'
        ) {
            window.setTimeout(function () {
                if ('scrollIntoView' in document.activeElement) {
                    document.activeElement.scrollIntoView(false)
                } else {
                    document.activeElement.scrollIntoViewIfNeeded(false)
                }
            }, 0)
        }
    })


    // onkeyUp å’Œ onKeydown å…¼å®¹æ€§é—®é¢˜
    // IOS ä¸­ input é”®ç›˜äº‹ä»¶ keyupã€keydownã€ç­‰æ”¯æŒä¸æ˜¯å¾ˆå¥½, ç”¨ input ç›‘å¬é”®ç›˜ keyup äº‹ä»¶ï¼Œåœ¨å®‰å“æ‰‹æœºæµè§ˆå™¨ä¸­æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯åœ¨ ios æ‰‹æœºæµè§ˆå™¨ä¸­ç”¨è¾“å…¥æ³•è¾“å…¥ä¹‹åï¼Œå¹¶æœªç«‹åˆ»ç›¸åº” keyup äº‹ä»¶


    // IOS12 è¾“å…¥æ¡†éš¾ä»¥ç‚¹å‡»è·å–ç„¦ç‚¹ï¼Œå¼¹ä¸å‡ºè½¯é”®ç›˜
    // å®šä½æ‰¾åˆ°é—®é¢˜æ˜¯ fastclick.js å¯¹ IOS12 çš„å…¼å®¹æ€§ï¼Œå¯åœ¨ fastclick.js æºç æˆ–è€… main.js åšä»¥ä¸‹ä¿®æ”¹
    FastClick.prototype.focus = function (targetElement) {
        var length
        if (
            deviceIsIOS &&
            targetElement.setSelectionRange &&
            targetElement.type.indexOf('date') !== 0 &&
            targetElement.type !== 'time' &&
            targetElement.type !== 'month'
        ) {
            length = targetElement.value.length
            targetElement.setSelectionRange(length, length)
            targetElement.focus()
        } else {
            targetElement.focus()
        }
    }

    // IOS é”®ç›˜æ”¶èµ·æ—¶é¡µé¢æ²¡ç”¨å›è½ï¼Œåº•éƒ¨ä¼šç•™ç™½
    // é€šè¿‡ç›‘å¬é”®ç›˜å›è½æ—¶é—´æ»šåŠ¨åˆ°åŸæ¥çš„ä½ç½®
    window.addEventListener('focusout', function () {
        window.scrollTo(0, 0)
    })

    //inputè¾“å…¥æ¡†å¼¹èµ·è½¯é”®ç›˜çš„è§£å†³æ–¹æ¡ˆã€‚
    var bfscrolltop = document.body.scrollTop
    $('input')
        .focus(function () {
            document.body.scrollTop = document.body.scrollHeight
            //console.log(document.body.scrollTop);
        })
        .blur(function () {
            document.body.scrollTop = bfscrolltop
            //console.log(document.body.scrollTop);
        })


    // IOS ä¸‹ fixed å¤±æ•ˆçš„åŸå› 
    // è½¯é”®ç›˜å”¤èµ·åï¼Œé¡µé¢çš„ fixed å…ƒç´ å°†å¤±æ•ˆï¼Œå˜æˆäº† absoluteï¼Œæ‰€ä»¥å½“é¡µé¢è¶…è¿‡ä¸€å±ä¸”æ»šåŠ¨æ—¶ï¼Œå¤±æ•ˆçš„ fixed å…ƒç´ å°±ä¼šè·Ÿéšæ»šåŠ¨äº†ã€‚ä¸ä»…é™äº type=text çš„è¾“å…¥æ¡†ï¼Œå‡¡æ˜¯è½¯é”®ç›˜ï¼ˆæ¯”å¦‚æ—¶é—´æ—¥æœŸé€‰æ‹©ã€select é€‰æ‹©ç­‰ç­‰ï¼‰è¢«å”¤èµ·ï¼Œéƒ½ä¼šé‡åˆ°åŒæ ·åœ°é—®é¢˜ã€‚
    // è§£å†³æ–¹æ³•: ä¸è®©é¡µé¢æ»šåŠ¨ï¼Œè€Œæ˜¯è®©ä¸»ä½“éƒ¨åˆ†è‡ªå·±æ»šåŠ¨,ä¸»ä½“éƒ¨åˆ†é«˜åº¦è®¾ä¸º 100%ï¼Œoverflow:scroll
    /**
    <body>
      <div class='warper'>
        <div class='main'></div>
      <div>
      <div class="fix-bottom"></div>
    </body>
     */

    /**
    .warper {
        position: absolute;
        width: 100%;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        overflow-y: scroll;
        -webkit-overflow-scrolling: touch; // è§£å†³iosæ»‘åŠ¨ä¸æµç•…é—®é¢˜
    }
    .fix-bottom {
        position: fixed;
        bottom: 0;
        width: 100%;
    } 
     */
</script>

</html>